(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[457],{285:(e,t,r)=>{"use strict";r.d(t,{$:()=>c});var s=r(5155),a=r(2115),i=r(9708),n=r(2085),o=r(9434);let l=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),c=a.forwardRef((e,t)=>{let{className:r,variant:a,size:n,asChild:c=!1,...d}=e,u=c?i.DX:"button";return(0,s.jsx)(u,{className:(0,o.cn)(l({variant:a,size:n,className:r})),ref:t,...d})});c.displayName="Button"},633:(e,t,r)=>{"use strict";r.d(t,{h:()=>a});var s=r(5155);r(2115);let a=e=>{let{size:t,axis:r,...a}=e,i="vertical"===r?"1px":t,n="horizontal"===r?"1px":t;return(0,s.jsx)("span",{style:{display:"block",width:i,minWidth:i,height:n,minHeight:n},...a})}},3068:(e,t,r)=>{Promise.resolve().then(r.bind(r,3693))},3693:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>v});var s=r(5155),a=r(2115),i=r(285),n=r(9434);let o=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("textarea",{className:(0,n.cn)("flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",r),ref:t,...a})});o.displayName="Textarea";let l=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...a})});l.displayName="Card";let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",r),...a})});c.displayName="CardHeader";let d=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",r),...a})});d.displayName="CardTitle";let u=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",r),...a})});u.displayName="CardDescription";let f=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",r),...a})});f.displayName="CardContent",a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",r),...a})}).displayName="CardFooter";var m=r(7481),p=r(5695),h=r(7313),g=r(633);let x=()=>{let[e,t]=(0,a.useState)(!1),[r,n]=(0,a.useState)(""),{toast:o}=(0,m.dj)(),l=async()=>{console.log("Launching viewer???"),t(!0),n("Launching DICOM Viewer..."),console.log("Launching viewer...");try{let e=await fetch("http://localhost:5000/run-viewer",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({scanDir:"scan"})});console.log(e),console.log("Launching viewer!!!");let t=await e.json();t.success?(n("DICOM Viewer launched successfully!"),o({title:"Viewer Launched",description:"Check your desktop for the application window."})):(n("Error: ".concat(t.error||"Unknown error")),o({title:"Launch Error",description:t.error||"Failed to launch the DICOM viewer",variant:"destructive"}))}catch(t){let e="Unknown error occurred";t instanceof Error?e=t.message:"string"==typeof t?e=t:t&&"object"==typeof t&&"message"in t&&(e=String(t.message)),n("Failed to communicate with server: ".concat(e)),o({title:"Connection Error",description:e,variant:"destructive"}),console.error(t)}finally{setTimeout(()=>{t(!1)},2e3)}};return(0,s.jsxs)("div",{className:"w-full flex flex-col items-center gap-2 mb-4",children:[(0,s.jsx)(i.$,{onClick:l,disabled:e,className:"bg-black hover:bg-gray-800 text-white",children:e?"Launching...":"Launch 3D DICOM Viewer"}),r&&(0,s.jsx)("p",{className:"text-sm text-gray-600",children:r})]})};function v(){let[e,t]=(0,a.useState)(""),[r,n]=(0,a.useState)(""),[v,b]=(0,a.useState)(null),[y,w]=(0,a.useState)(null),{toast:j}=(0,m.dj)(),N=(0,p.useRouter)();(0,a.useEffect)(()=>{let e=localStorage.getItem("selectedHistoryItem");if(e){let t=JSON.parse(e);b(t.mri_url),w(t.timestamp);return}let t=localStorage.getItem("analysisResult");if(t){let e=JSON.parse(t);b(e.image_url),w(e.timestamp)}},[]);let S=async()=>{if(!e.trim()){j({title:"Empty prompt",description:"Please enter a question to ask the chatbot.",variant:"destructive"});return}try{let t={prompt:e.trim(),timestamp:y},r=await fetch("http://localhost:5000/chat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!r.ok)throw Error("HTTP ".concat(r.status));let s=await r.json();if(s.error)throw Error(s.error);n(s.response)}catch(e){console.error("Chat error:",e),j({title:"Error getting response",description:e instanceof Error?e.message:"Unknown error occurred",variant:"destructive"})}};return(0,s.jsxs)("div",{className:"flex flex-col items-center justify-start min-h-screen bg-background text-foreground p-8 relative",children:[(0,s.jsx)(h.tU,{defaultValue:"chat",children:(0,s.jsxs)(h.j7,{children:[(0,s.jsx)(h.Xi,{value:"upload",onClick:()=>N.push("/"),className:"text-black data-[state=active]:bg-black data-[state=active]:text-white",children:"Upload Images"}),(0,s.jsx)(h.Xi,{value:"chat",className:"text-black data-[state=active]:bg-black data-[state=active]:text-white",children:"Query"}),(0,s.jsx)(h.Xi,{value:"history",onClick:()=>N.push("/history"),className:"text-black data-[state=active]:bg-black data-[state=active]:text-white",children:"History"})]})}),(0,s.jsx)(g.h,{axis:"vertical",size:50}),(0,s.jsx)("h1",{className:"text-4xl font-bold mb-4",children:"MRI Analysis"}),v?(0,s.jsx)("div",{className:"flex justify-center w-full mb-8",children:(0,s.jsx)("img",{src:v,alt:"MRI Scan",className:"w-60 h-60 object-cover rounded-lg shadow-lg"})}):(0,s.jsxs)("p",{className:"mb-8 italic text-muted-foreground",children:["No image uploaded yet. Go to"," ",(0,s.jsx)("span",{className:"font-semibold",children:"Upload Images"})," or pick one from"," ",(0,s.jsx)("span",{className:"font-semibold",children:"History"}),"."]}),(0,s.jsx)(x,{}),(0,s.jsxs)(l,{className:"w-full max-w-2xl",children:[(0,s.jsxs)(c,{children:[(0,s.jsx)(d,{children:"AI-Powered Chatbot"}),(0,s.jsx)(u,{children:"Ask any question about the scan."})]}),(0,s.jsxs)(f,{className:"grid gap-4",children:[(0,s.jsx)(o,{placeholder:"Enter your prompt hereâ€¦",value:e,onChange:e=>t(e.target.value)}),(0,s.jsx)(i.$,{onClick:S,children:"Submit Prompt"}),r&&(0,s.jsx)("div",{className:"rounded-md border p-4 bg-white text-black",children:(0,s.jsx)("p",{children:r})})]})]}),(0,s.jsx)("p",{className:"text-xs fixed bottom-2 right-2",children:"Powered by Synaptiq"})]})}},7313:(e,t,r)=>{"use strict";r.d(t,{Xi:()=>c,j7:()=>l,tU:()=>o});var s=r(5155),a=r(2115),i=r(9255),n=r(9434);let o=i.bL,l=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(i.B8,{ref:t,className:(0,n.cn)("inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground",r),...a})});l.displayName=i.B8.displayName;let c=a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(i.l9,{ref:t,className:(0,n.cn)("inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm",r),...a})});c.displayName=i.l9.displayName,a.forwardRef((e,t)=>{let{className:r,...a}=e;return(0,s.jsx)(i.UC,{ref:t,className:(0,n.cn)("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",r),...a})}).displayName=i.UC.displayName},7481:(e,t,r)=>{"use strict";r.d(t,{dj:()=>f});var s=r(2115);let a=0,i=new Map,n=e=>{if(i.has(e))return;let t=setTimeout(()=>{i.delete(e),d({type:"REMOVE_TOAST",toastId:e})},1e6);i.set(e,t)},o=(e,t)=>{switch(t.type){case"ADD_TOAST":return{...e,toasts:[t.toast,...e.toasts].slice(0,1)};case"UPDATE_TOAST":return{...e,toasts:e.toasts.map(e=>e.id===t.toast.id?{...e,...t.toast}:e)};case"DISMISS_TOAST":{let{toastId:r}=t;return r?n(r):e.toasts.forEach(e=>{n(e.id)}),{...e,toasts:e.toasts.map(e=>e.id===r||void 0===r?{...e,open:!1}:e)}}case"REMOVE_TOAST":if(void 0===t.toastId)return{...e,toasts:[]};return{...e,toasts:e.toasts.filter(e=>e.id!==t.toastId)}}},l=[],c={toasts:[]};function d(e){c=o(c,e),l.forEach(e=>{e(c)})}function u(e){let{...t}=e,r=(a=(a+1)%Number.MAX_SAFE_INTEGER).toString(),s=()=>d({type:"DISMISS_TOAST",toastId:r});return d({type:"ADD_TOAST",toast:{...t,id:r,open:!0,onOpenChange:e=>{e||s()}}}),{id:r,dismiss:s,update:e=>d({type:"UPDATE_TOAST",toast:{...e,id:r}})}}function f(){let[e,t]=s.useState(c);return s.useEffect(()=>(l.push(t),()=>{let e=l.indexOf(t);e>-1&&l.splice(e,1)}),[e]),{...e,toast:u,dismiss:e=>d({type:"DISMISS_TOAST",toastId:e})}}},9434:(e,t,r)=>{"use strict";r.d(t,{cn:()=>i});var s=r(2596),a=r(9688);function i(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,a.QP)((0,s.$)(t))}}},e=>{var t=t=>e(e.s=t);e.O(0,[256,230,441,684,358],()=>t(3068)),_N_E=e.O()}]);